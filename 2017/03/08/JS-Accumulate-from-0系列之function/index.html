<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="廖文浩在 Github 上的个人博客">
    <meta name="keyword" content="null">
    <meta name="theme-color" content="#600090">
    <meta name="msapplication-navbutton-color" content="#600090">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#600090">
    <link rel="shortcut icon" href="http://om8hmotom.bkt.clouddn.com/2017-06-19-comic.jpeg">
    <link rel="alternate" type="application/atom+xml" title="KYLEWH" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.css">
    <title>
        
        JS: Accumulate from 0系列之function｜Kyle&#39;s blog
        
    </title>

    <link rel="canonical" href="http://kylewh.github.io/2017/03/08/JS-Accumulate-from-0系列之function/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/blog-style.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">
</head>

<style>

    header.intro-header {
        background-image: url('http://om8hmotom.bkt.clouddn.com/banner_2.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top " id="nav-top" data-ispost = "true" data-istags="false
" data-ishome = "false" >
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand animated pulse" href="/">
                <span class="brand-logo">
                    KYLEWH
                </span>
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <!-- /.navbar-collapse -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
					
                    
                        
							
                        <li>
                            <a href="/tags/">tags</a>
                        </li>
							
						
                    
					
					
                </ul>
            </div>
        </div>
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
//    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>

<!-- Main Content -->

<!--only post-->


<img class="wechat-title-img"
     src="http://om8hmotom.bkt.clouddn.com/book.jpg">


<style>
    
    header.intro-header {
        background-image: url('http://om8hmotom.bkt.clouddn.com/book.jpg?imageView2/1/w/1400/h/400/interlace/1/q/90')
    }

    
</style>

<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <div class="post-heading">
                    <h1>JS: Accumulate from 0系列之function</h1>
                    
                    <span class="meta">
                         作者 Kylewh
                        <span>
                          日期 2017-03-08
                         </span>
                    </span>
                    <div class="tags text-center">
                        
                        <a class="tag" href="/tags/#JS"
                           title="JS">JS</a>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="post-title-haojen">
        <span>
            JS: Accumulate from 0系列之function
        </span>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container">
                <h1 id="引用类型之-Function"><a href="#引用类型之-Function" class="headerlink" title="引用类型之-Function"></a>引用类型之-Function</h1><h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//函数声明会提前</span></div><div class="line"><span class="keyword">var</span> result = add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>);</div><div class="line"><span class="built_in">console</span>.log(result);  <span class="comment">//45</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> aArgs = [].slice.call(<span class="built_in">arguments</span>);</div><div class="line">	<span class="keyword">return</span> aArgs.reduce(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//运用函数表达式则不会进行提前</span></div><div class="line"><span class="built_in">console</span>.log( _add(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>) ); <span class="comment">//"TypeError: _add is not a function</span></div><div class="line"><span class="keyword">var</span> _add = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> aArgs = [].slice.call(<span class="built_in">arguments</span>);</div><div class="line">	<span class="keyword">return</span> aArgs.reduce(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a+b);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="return-amp-返回值"><a href="#return-amp-返回值" class="headerlink" title="return&amp;返回值"></a>return&amp;返回值</h2><p>如果不显式返回值，那么这个函数的返回值默认为<code>undefined</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">cal</span> (<span class="params">num1,num2, calType</span>) </span>&#123;</div><div class="line">	<span class="keyword">switch</span> (calType) &#123;</div><div class="line">		<span class="keyword">case</span> <span class="string">'add'</span>:</div><div class="line">			<span class="keyword">return</span> num1+num2;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">case</span> <span class="string">'minus'</span>:</div><div class="line">			<span class="keyword">return</span> num1-num2;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">		<span class="keyword">default</span>:</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">			<span class="keyword">break</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//这时我们输入不在上列判断情况里的type</span></div><div class="line"><span class="built_in">console</span>.log( cal(<span class="number">1</span>,<span class="number">2</span>,<span class="string">'times'</span>) ); <span class="comment">//undefined</span></div></pre></td></tr></table></figure>
<p>任何时候一旦function内部遇到return，函数立即退出。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"> command </span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>(command === <span class="string">'stop'</span>)&#123;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">return</span> <span class="built_in">arguments</span>.callee.name + <span class="string">' is running...'</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log( fn() ); <span class="comment">//"fn is running..."</span></div><div class="line"><span class="built_in">console</span>.log( fn(<span class="string">'stop'</span>) ) <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<h2 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a>Arguments</h2><p>记住一点，形参和arguments对象的元素是同步的，且它们的内存空间是独立的，如果没有传入参数，arguments如同定义了却没有初始化一样，值是undefined.    </p>
<p>关于函数内部的argumens对象我们有两项需要知道:</p>
<ul>
<li>arguments.callee: 指针，指向拥有这个arguments对象的函数（本身）,作用是可以对函数进行解耦</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//我们先写一个简陋版factorial函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>( num &lt;=<span class="number">1</span> ) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> num * factorial(--num);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//上面的函数存在一个问题，如果我们想复用这个函数，但是又必须得修改函数名，那么我们还必须修改内部的函数名，所以这是一个紧密耦合的函数，为了让其解耦，我们可以使用arguments.callee</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">goodFactorial</span>(<span class="params">num</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>( num &lt;=<span class="number">1</span> ) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">		<span class="keyword">return</span> num * <span class="built_in">arguments</span>.callee(--num);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>arguments.callee.caller： 保存着调用当前函数的函数的引用，如果在全局作用域里调用当前函数，它的值为null.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	inner();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">inner</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee.caller);</div><div class="line">&#125;</div><div class="line"></div><div class="line">outer(); </div><div class="line"><span class="comment">/* function outer()&#123;</span></div><div class="line">     inner();</div><div class="line">*/ &#125;</div></pre></td></tr></table></figure>
<h2 id="length"><a href="#length" class="headerlink" title="length"></a>length</h2><p>function本质是对象，它也具有length属性，它的数值是由function声明时的形参个数决定的.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,c</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> a+b+c;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(fn.length); <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>注意这种特殊情况，rest参数下，此参数不计入length.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_fn</span>(<span class="params">firstArgs, ...args</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> [].slice.call(<span class="built_in">arguments</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(_fn.length); <span class="comment">//1</span></div></pre></td></tr></table></figure>
<p>我们还可以利用这个属性进行参数检测</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//我们先在function原型上注入一个before函数，用来注入前置检测函数。 这是面向切面编程的思想(AOP)，后面总结设计模式的时候会提到。</span></div><div class="line"></div><div class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span> (<span class="params">beforeCheckFn</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">if</span>(beforeCheckFn.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>))&#123;</div><div class="line">		  <span class="keyword">return</span> _this.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//我们的主函数，接受两个参数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">printTwoNum</span> (<span class="params">num1, num2</span>) </span>&#123;</div><div class="line">	[].slice.call(<span class="built_in">arguments</span>).forEach(<span class="function">(<span class="params">a</span>)=&gt;</span>(<span class="built_in">console</span>.log(a)));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//我们的前置检测函数，如果接受的函数参数不等于形参个数，就会抛出错误</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkArgs</span> (<span class="params">num1,num2</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>( <span class="built_in">arguments</span>.length !== <span class="built_in">arguments</span>.callee.length) &#123;</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'The amounts of arguments is not allowed.'</span>);</div><div class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> newPrint = printTwoNum.before(checkArgs);</div><div class="line">newPrint(<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// 1, 2</span></div><div class="line">newPrint(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>); <span class="comment">// "Error: The amounts of arguments is not allowed.</span></div></pre></td></tr></table></figure>
<h2 id="没有重载"><a href="#没有重载" class="headerlink" title="没有重载"></a>没有重载</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">num1</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> num1 + <span class="number">100</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">num1</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> num2 + <span class="number">200</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">//后者会覆盖前者</span></div><div class="line"></div><div class="line"><span class="comment">//要模拟重载，思路是对传入的参数进行判断，然后进行相应的操作。</span></div></pre></td></tr></table></figure>
<p>这里涉及到一个惰性函数的问题，如果在当前开发环境下我们需要进行环境监测从而判断函数如何执行（多见于兼容性监测），那么在执行环境稳定不变的前提下，我们不必每次都进行判断，我们可以在第一次判断时就给函数定性，从而在之后的调用中都直接执行适合当前环境的函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="comment">//通过这种模式可以提高函数的效率，不必每次都进行检测。</span></div><div class="line"><span class="keyword">var</span> addEvent = <span class="function"><span class="keyword">function</span>(<span class="params">ele, type, handler</span>) </span>&#123;</div><div class="line">	<span class="keyword">if</span>(<span class="built_in">window</span>.addEventListener) &#123;</div><div class="line">		addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</div><div class="line">		    ele.addEventListener(type, handler, <span class="literal">false</span>);</div><div class="line">	    &#125;;</div><div class="line">	&#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</div><div class="line">		addEvent = <span class="function"><span class="keyword">function</span> (<span class="params">ele, type, handler</span>) </span>&#123;</div><div class="line">				ele.attachEvent(<span class="string">'on'</span> + type, handler);</div><div class="line">			&#125;;</div><div class="line">	&#125;</div><div class="line">	addEvent(elem, type, handler);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="this"><a href="#this" class="headerlink" title="this"></a>this</h2><p>函数内部的this指向函数的执行上下文，通俗的说就是函数被谁调用就指向谁。</p>
<ul>
<li>作为对象的方法调用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// </div><div class="line">var obj = &#123;</div><div class="line">    a: 1,</div><div class="line">    getA: function () &#123;</div><div class="line">        console.log(this === obj, this.a);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">obj.getA();</div></pre></td></tr></table></figure>
<ul>
<li>作为普通函数被调用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">window</span>.name = <span class="string">'globalName'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">&#125;</div><div class="line">getName();</div><div class="line"></div><div class="line"><span class="comment">//注意这种情况</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> myObject = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'kylewh'</span>,</div><div class="line">    <span class="attr">getMyName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> getMyName = myObject.getMyName; <span class="comment">//此时相当于在window全局环境下声明了一个getName函数，这里的this不再存在于myObject的作用域里</span></div><div class="line"><span class="built_in">console</span>.log(getMyName()); <span class="comment">//globalName</span></div><div class="line"></div><div class="line"><span class="comment">//strict 模式下， 普通函数调用下的this不再指向全局对象，而是undefined</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</div><div class="line"><span class="meta">    "use strict"</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</div><div class="line">&#125;</div><div class="line">func(); <span class="comment">//undefined</span></div></pre></td></tr></table></figure>
<ul>
<li>构造器调用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Construc</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'kylewh'</span>;</div><div class="line">&#125; <span class="comment">//隐式的返回了一个对象，this指向这个对象</span></div><div class="line"><span class="keyword">var</span> ooobj = <span class="keyword">new</span> Construc();</div><div class="line"><span class="built_in">console</span>.log(ooobj.name);</div><div class="line"></div><div class="line"><span class="comment">//如果显式的返回一个对象，那么this会指向这个对象</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_Construc</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = <span class="string">'kylewh'</span>;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">'wenhao'</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> oooobj = <span class="keyword">new</span> _Construc();</div><div class="line"><span class="built_in">console</span>.log(oooobj.name); <span class="comment">//wenhao</span></div></pre></td></tr></table></figure>
<p><strong>我们还可以在函数内部使用<code>return this</code>来达成链式调用的效果.</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.addMethod = <span class="function"><span class="keyword">function</span> (<span class="params">name, fn</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>[name] = fn;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//方便链式添加</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> method = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line">method</div><div class="line">    .addMethod(<span class="string">'checkName'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'验证名字'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>; <span class="comment">//方便链式调用</span></div><div class="line">    &#125;).addMethod(<span class="string">'checkEmail'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'验证Email'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;).addMethod(<span class="string">'checkPhone'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="string">'验证手机'</span>);</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">    &#125;);</div><div class="line"><span class="built_in">console</span>.dir(method);</div><div class="line">method.checkName().checkEmail().checkPhone();</div><div class="line"><span class="comment">//验证名字, 验证Email, 验证手机</span></div></pre></td></tr></table></figure>
<h3 id="call-amp-apply"><a href="#call-amp-apply" class="headerlink" title="call &amp; apply"></a>call &amp; apply</h3><p>这两个函数的作用本质上都是改变函数的执行上下文，并传入执行参数，而apply是可以支持以数组的的形式传入参数的。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">window</span>.color = <span class="string">"red"</span>;</div><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">	<span class="attr">color</span>: <span class="string">'blue'</span></div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayColor</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	alert(<span class="keyword">this</span>.color); </div><div class="line">&#125;</div><div class="line">sayColor(); <span class="comment">//red</span></div><div class="line"></div><div class="line">sayColor.call(<span class="keyword">this</span>); <span class="comment">//red</span></div><div class="line">sayColor.call(<span class="built_in">window</span>); <span class="comment">//red</span></div><div class="line">sayColor.call(o); <span class="comment">//blue</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">_add</span>(<span class="params">num1 , num2</span>) </span>&#123;</div><div class="line">	<span class="built_in">console</span>.log ( num1 + num2 );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> num = [<span class="number">10</span>,<span class="number">20</span>];</div><div class="line">_add.apply(<span class="literal">null</span>, num); <span class="comment">//30</span></div></pre></td></tr></table></figure>
<h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><p>也是用来改变函数的执行上下文，当时返回的是绑定传入上下文之后的函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> test = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'kylewhtest'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2, num3</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + num1 + num2 + num3);</div><div class="line">&#125;.bind(test);</div><div class="line"></div><div class="line">fn2(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>); <span class="comment">//kylewhtest123</span></div><div class="line"></div><div class="line"><span class="comment">//bind可以只传入部分参数</span></div><div class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2, num3</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + num1 + num2 + num3);</div><div class="line">&#125;.bind(test,<span class="number">1</span>,<span class="number">2</span>);</div><div class="line"></div><div class="line">fn2(<span class="number">3</span>); <span class="comment">//kylewhtest123</span></div></pre></td></tr></table></figure>
<h3 id="一些例子"><a href="#一些例子" class="headerlink" title="一些例子"></a>一些例子</h3><ul>
<li>以下代码输出什么?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> john = &#123; </div><div class="line">  <span class="attr">firstName</span>: <span class="string">"John"</span> </div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123; </div><div class="line">  alert(<span class="keyword">this</span>.firstName + <span class="string">": hi!"</span>)</div><div class="line">&#125;</div><div class="line">john.sayHi = func <span class="comment">//this指向函数执行环境，即john</span></div><div class="line">john.sayHi() <span class="comment">// alert John :"hi!"</span></div></pre></td></tr></table></figure>
<ul>
<li>下面代码输出什么，为什么?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line">func()  <span class="comment">//执行函数，当前执行环境是window，alert [object Window]</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123; </div><div class="line">  alert(<span class="keyword">this</span>) </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>下面代码输出什么?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//函数执行环境 -&gt; document; this -&gt; document</span></div><div class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">//函数执行环境 -&gt; 全局(Winodow); this -&gt; Window</span></div><div class="line">    &#125;, <span class="number">200</span>);</div><div class="line">&#125;, <span class="literal">false</span>);</div></pre></td></tr></table></figure>
<ul>
<li>下面代码输出什么，why?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> john = &#123; </div><div class="line">  <span class="attr">firstName</span>: <span class="string">"John"</span> </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123; </div><div class="line">  alert( <span class="keyword">this</span>.firstName )</div><div class="line">&#125;</div><div class="line">func.call(john) <span class="comment">//call改变执行环境，this指向john，this.firstName = "John"</span></div></pre></td></tr></table></figure>
<ul>
<li>以下代码有什么问题，如何修改?</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">module</span>= &#123;</div><div class="line">  <span class="attr">bind</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    $btn.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>) <span class="comment">//this指向eventTarget，在此即被点击的DOM元素($btn)</span></div><div class="line">      <span class="keyword">this</span>.showMsg(); <span class="comment">//dom元素上并没有挂载这个函数，无法执行</span></div><div class="line">    &#125;)</div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  <span class="attr">showMsg</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'hi'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>修改版：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="built_in">module</span>= &#123;</div><div class="line">  <span class="attr">bind</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	  <span class="keyword">let</span> _this = <span class="keyword">this</span>; <span class="comment">//将函数执行上下文缓存为一个变量</span></div><div class="line">    $btn.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>) </div><div class="line">      _this.showMsg();</div><div class="line">    &#125;)</div><div class="line">  &#125;,</div><div class="line">  </div><div class="line">  <span class="attr">showMsg</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'You clicked the button!'</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="built_in">module</span>.bind();</div><div class="line"><span class="comment">//点击后显示： You clicked the button!</span></div></pre></td></tr></table></figure>
<h3 id="综合运用"><a href="#综合运用" class="headerlink" title="综合运用"></a>综合运用</h3><p>根据前面的call和apply，我们可以先模拟一个简单版本的bind，不考虑部分参数传入的问题:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> _this.apply(context, <span class="built_in">arguments</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>再加上前后参数拼接在一起，完整版：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> _this = <span class="keyword">this</span>;</div><div class="line">	<span class="keyword">var</span> context = [].shift.call(<span class="built_in">arguments</span>);</div><div class="line">	<span class="keyword">var</span> args = [].slice.call(<span class="built_in">arguments</span>);</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> newArgs = [].concat.call( args, [].slice.call(<span class="built_in">arguments</span>) );</div><div class="line">		<span class="keyword">return</span> _this.apply(context, newArgs);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//Test</span></div><div class="line"><span class="keyword">var</span> test = &#123;</div><div class="line">    <span class="attr">name</span>: <span class="string">'kylewhtest'</span></div><div class="line">&#125;;</div><div class="line"><span class="keyword">var</span> fn2 = <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2, num3</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + num1 + num2 + num3);</div><div class="line">&#125;.bind(test,<span class="number">1</span>,<span class="number">2</span>);</div><div class="line"></div><div class="line">fn2(<span class="number">3</span>); <span class="comment">//kylewhtest123</span></div></pre></td></tr></table></figure>
<h2 id="关于参数"><a href="#关于参数" class="headerlink" title="关于参数"></a>关于参数</h2><p>ES6新特性：可以在函数声明时传入默认参数</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params">name = <span class="string">'kyle'</span></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;name&#125;</span>`</span>);</div><div class="line">&#125;</div><div class="line">sayName(); <span class="comment">// My name is kyle!</span></div><div class="line"></div><div class="line"><span class="comment">//还可以将一个函数传入！</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayName</span>(<span class="params">name = <span class="string">'kyle'</span>, callback = function(</span>)</span>&#123;&#125;) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">$&#123;name&#125;</span>`</span>);</div><div class="line">  <span class="comment">//我们不需要去判断if(callback)了</span></div><div class="line">  callback();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="又是烦人的this"><a href="#又是烦人的this" class="headerlink" title="又是烦人的this"></a>又是烦人的this</h2><p>先看下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>:<span class="number">2</span>, <span class="attr">fn</span>:fn, <span class="attr">fn1</span>:fn1&#125;,</div><div class="line">    a = <span class="string">'Surprise!! &gt;_&lt;'</span>;</div><div class="line"></div><div class="line">obj.fn(); <span class="comment">//2</span></div><div class="line"></div><div class="line">obj.fn1(); <span class="comment">//2 </span></div><div class="line"></div><div class="line"><span class="keyword">var</span> bar = obj.fn;</div><div class="line"></div><div class="line">bar(); <span class="comment">//Surprise!! &gt;_&lt;</span></div><div class="line"></div><div class="line"><span class="comment">//同样，看看回调</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">doFn</span>(<span class="params">fn</span>)</span>&#123;</div><div class="line">	fn();</div><div class="line">&#125;</div><div class="line"></div><div class="line">doFn(obj.fn); <span class="comment">//参数传递其实就是一种隐式赋值，因此我们传入函数时也会被隐式赋值</span></div><div class="line"></div><div class="line">setTimeout(obj.fn1, <span class="number">1000</span>); <span class="comment">// Surprise!! &gt;_&lt;</span></div><div class="line"></div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  obj.fn1(); <span class="comment">//2</span></div><div class="line">&#125;,<span class="number">2000</span>)</div></pre></td></tr></table></figure>
<p>出现这种问题的原因本质是<code>bar()</code>与<code>obj.fn()</code> 和 <code>obj.fn1</code>与<code>obj.fn1()</code>的区别：</p>
<p>请看着这条语句： <code>var bar = obj.fn</code>， 现在开始你问我答环节。    </p>
<ul>
<li>问： 等号的出现意味着什么！？</li>
<li>答： 传递引用！</li>
<li>问： Nice! 那引用的对象是谁！？</li>
<li>答： fn 这个函数</li>
<li>问： 好，那么执行的方式是怎样的！？</li>
<li>答： 独立调用！</li>
<li>问： 独立调用时，存在对象上下文吗！？</li>
<li>答： 没有….额…等等…. window算吗？</li>
<li>问： Excelletn baby! 就是window. 那this指向谁？</li>
<li>答： window嘛！！</li>
<li>问： 再看看延迟函数里的回调传入方式，传入obj.fn1时是在干什么？</li>
<li>答： 传递引用！！</li>
<li>问： 那匿名函数里的obj.fn1()是在干什么？</li>
<li>答： 执行函数啊！</li>
<li>问： 有没有对象上下文！？this指向谁！？</li>
<li>答： 哈哈哈哈哈我懂了，this指向obj</li>
</ul>
<p>这就是我们为什么需要注意函数表达式和函数声明的原因，因为在有些时候可能因为你使用函数表达式的方式对函数引用进行了传递，执行后从而得到你意想不到的效果。 注意跑！</p>

                <hr>
                
                <!-- 多说 Share start -->
                <div class="ds-share"
                     style="text-align: right"
                     data-thread-key="2017/03/08/JS-Accumulate-from-0系列之function/"
                     data-title="JS: Accumulate from 0系列之function"
                     data-url="http://kylewh.github.io/2017/03/08/JS-Accumulate-from-0系列之function/"
                     data-images="http://kylewh.github.io/2017/03/08/JS-Accumulate-from-0系列之function//book.jpg"
                     data-content="引用类型之-Function声明//函数声明会提前var result = add(1,2,3... | Kyle&#39;s blog ">
                    <div class="ds-share-inline">
                        <ul class="ds-share-icons-16">
                            <li data-toggle="ds-share-icons-more"><a class="ds-more" href="#">分享到：</a></li>
                            <li><a class="ds-wechat flat" href="javascript:void(0);" data-service="wechat">微信</a></li>
                            <li><a class="ds-weibo flat" href="javascript:void(0);" data-service="weibo">微博</a></li>
                            <li><a class="ds-douban flat" href="javascript:void(0);" data-service="douban">豆瓣</a></li>
                        </ul>
                        <div class="ds-share-icons-more">
                        </div>
                    </div>
                    <hr>
                </div>
                <!-- 多说 Share end-->
                

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2017/03/09/JS-Accumulate-from-0系列之Object/" data-toggle="tooltip" data-placement="top"
                           title="JS: Accumulate from 0系列之Object">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2017/03/07/JS-Accumulate-from-0/" data-toggle="tooltip" data-placement="top"
                           title="JS: Accumulate from 0系列之变量&操作符">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                
                <!-- 多说评论框 start -->
                <div class="comment">
                    <div class="ds-thread"
                         data-thread-key="2017/03/08/JS-Accumulate-from-0系列之function/"
                         data-title="JS: Accumulate from 0系列之function"
                         data-url="http://kylewh.github.io/2017/03/08/JS-Accumulate-from-0系列之function/">
                    </div>
                </div>
                <!-- 多说评论框 end -->
                

                

            </div>

            <div class="col-lg-2 col-lg-offset-0 visible-lg-block sidebar-container catalog-container">
                <div class="toc-wrap">
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#引用类型之-Function"><span class="toc-text">引用类型之-Function</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#声明"><span class="toc-text">声明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return-amp-返回值"><span class="toc-text">return&返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Arguments"><span class="toc-text">Arguments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#length"><span class="toc-text">length</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#没有重载"><span class="toc-text">没有重载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this"><span class="toc-text">this</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#call-amp-apply"><span class="toc-text">call & apply</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bind"><span class="toc-text">bind</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一些例子"><span class="toc-text">一些例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#综合运用"><span class="toc-text">综合运用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关于参数"><span class="toc-text">关于参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#又是烦人的this"><span class="toc-text">又是烦人的this</span></a></li></ol></li></ol>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5 class="text-center">
                        <a href="/tags/">FEATURED TAGS</a>
                    </h5>
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#JS"
                           title="JS">JS</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>

    </div>
</article>


<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    // dynamic User by Hux
    var _user = 'kylewh';

    // duoshuo comment query.
    var duoshuoQuery = {short_name: _user};
    (function () {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->





<!-- Footer -->
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                <br>
                <ul class="list-inline text-center">
                
                
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/kylevon">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/kylewh">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; KYLEWH 2017
                    <br>
                    <span id="busuanzi_container_site_pv" style="font-size: 12px;">PV: <span id="busuanzi_value_site_pv"></span> Times</span>
                </p>

            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/blog.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://kylewh.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->



<!-- Baidu Tongji -->


<!-- swiftype -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','null','2.0.0');
</script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<!--wechat title img-->
<img class="wechat-title-img" src="http://om8hmotom.bkt.clouddn.com/2017-06-19-comic.jpeg">
</body>

</html>
